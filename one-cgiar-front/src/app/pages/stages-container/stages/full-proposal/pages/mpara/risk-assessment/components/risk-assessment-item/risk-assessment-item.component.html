<div class="custom_card {{this.riskAssessment.add_by_user?'manual_border':'normal_border'}}">
    <div class="risk_header">
        <div class="create_by_tag" *ngIf="this.riskAssessment.add_by_user">
            {{this.riskAssessment.add_by_user?'Created by user':''}}
        </div>
        <br *ngIf="this.riskAssessment.add_by_user">
        <div class="risk_name" *ngIf="!riskTitleEditableIsActive">{{this.riskAssessment.risks_achieving_impact}}</div>
        <div class="edit_button" *ngIf="!riskTitleEditableIsActive">
            <app-button-edit-or-delete (action)="activeRiskTitleEditable()" ></app-button-edit-or-delete>
        </div>


        <div class="edit_options" *ngIf="riskTitleEditableIsActive">
            <div class="list">
                <div class="button_option ibd-shadow-3" (click)="this.selectList = true; this.riskAssessment.add_by_user = false">list</div>
            </div>
            <div  class="input">
                <div class="button_option ibd-shadow-3" (click)="this.selectList = false; this.riskAssessment.add_by_user = true">input</div>
            </div>
        </div>

        <ibdc-select *ngIf="selectList === true" [options]="
        {
         required:true,
         inputTitle:'Select Risk',
         form:riskAssessmentForm,
         formControlId:'idBd',
         selectItemId:'idBd',
         formControlName:'risks_achieving_impact',
         selectItemName:'risks_achieving_impact',
         frontendSearchAttribute:'risks_achieving_impact',
         readOnlyVariable: this._initiativesService.initiative.readonly,
         selectList: this.risksList
        }">
        ></ibdc-select>

        <div class="row" *ngIf="selectList === false">
            <div class="col-12">
                <br>
            </div>
            <div class="col-6">
                <div class="ibdc-input-field-container">
                    <ibdc-input-field inputTitle="Risks achieving impact" [rows]="1" [objectItem]="this.riskAssessment"  [objectAtributteName]="'risks_achieving_impact'"></ibdc-input-field>
                </div>
            </div>
            <div class="col-6">
                <div class="ibdc-input-field-container">
                    <ibdc-select-field
                       [objectItem]="this.riskAssessment"  [objectAtributteName]="'risks_theme'" inputTitle="Risk theme"
                       [selectableList]="[{id:1,categoryName:'Research'},{id:2,categoryName:'Research support'}]"
                     ></ibdc-select-field>
                 </div>
            </div>
        </div>


        <br>



    </div>
    <hr>
    <div class="row">
        <div class="col-12">
            <ibdc-textarea
            [options]="{inputTitle:'Detailed description', form:riskAssessmentForm, formControlName:'description_risk'
            ,readOnlyVariable: this._initiativesService.initiative.readonly,initialParagraphs:1,maxWords:100}">
            </ibdc-textarea>
        </div>
        <div class="col-6 margin-top-15">
            <ibdc-input
            [options]="{inputTitle:'Likelihood', form:riskAssessmentForm, formControlName:'likelihood',
            readOnlyVariable: this._initiativesService.initiative.readonly, type:'number', min:0, max:5,iconText:'pin',description:'should be rate from 1 to 5'}">
            </ibdc-input>
        </div>
        <div class="col-6 margin-top-15">
            <ibdc-input
            [options]="{inputTitle:'Consequence (impact)', form:riskAssessmentForm, formControlName:'impact',
            readOnlyVariable: this._initiativesService.initiative.readonly, type:'number', min:0, max:5,iconText:'pin',description:'should be rate from 1 to 5'}">
            </ibdc-input>
        </div>
        <div class="col-6 margin-top-15">
            <ibdc-simple-text [options]="{inputTitle:'Risk Score', value:(this.riskAssessment.likelihood * this.riskAssessment.impact)}"></ibdc-simple-text>

            <!-- <ibdc-input
            [options]="{inputTitle:'Risk Score', form:riskAssessmentForm, formControlName:'risk_score',
            readOnlyVariable: this._initiativesService.initiative.readonly, type:'number', min:0,iconText:'pin',description:'a'}">
            </ibdc-input> -->
        </div>
        <div class="col-6"></div>
        <div class="col-12">
            <br>
            <hr>
            <br>
        </div>
        
        <div class="col-12">
            <div class="ibdc_basic_title">Opportunities</div>
            <div *ngFor="let opportunity of this.riskAssessment.opportinities">
                <app-opportunity-item [hidden]="opportunity.active === false" [opportunity]="opportunity" ></app-opportunity-item>
            </div>
            <button pButton type="button" label="Add opportunity" icon="pi pi-plus-circle"  (click)="AddOpportunity()"></button>

        </div>
        
    </div>
</div>
